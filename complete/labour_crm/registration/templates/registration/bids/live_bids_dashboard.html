{% extends 'registration/job/base.html' %}
{% load humanize %} {% block title %}Live Bidding Dashboard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="page-title mb-0">Live Bidding Dashboard ðŸš€</h2>
    <div>
        <button class="btn btn-sm btn-outline-secondary">Sort by: Deadline</button>
    </div>
</div>

<div class="row">
    {% for job in jobs %}
    <div class="col-md-12 mb-3">
        <div class="card shadow-sm job-card">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-5">
                        <h5 class="card-title mb-1">{{ job.title }}</h5>
                        <p class="text-muted small mb-2">
                            <i class="bi bi-geo-alt-fill"></i> {{ job.location }}
                        </p>
                    </div>

                    <div class="col-md-4 d-flex justify-content-around align-items-center">
                        <div>
                            <span class="text-muted d-block small">Current Bid</span>
                            <span class="fw-bold fs-5">${{ job.highest_bid|default:"0"|intcomma }}</span>
                        </div>
                        <div>
                            <span class="text-muted d-block small">Total Bids</span>
                            <span class="badge bg-primary rounded-pill fs-6">{{ job.bid_count }}</span>
                        </div>
                    </div>

                    <div class="col-md-3 text-md-end">
                        <p class="text-danger small mb-2">
                            <i class="bi bi-clock-fill"></i>
                            Ends in: {{ job.bidding_deadline|timeuntil }}
                        </p>
                        <a href="{% url 'registration:bid_detail' job.id %}" class="btn btn-success">View Bids</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12">
        <div class="alert alert-info text-center">
            <h4 class="alert-heading">No Active Bids</h4>
            <p>There are no jobs currently open for bidding. Please check back later!</p>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}